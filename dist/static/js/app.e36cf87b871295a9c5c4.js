webpackJsonp([1],{"/ONX":function(t,e){},"0nQ+":function(t,e){},"50sj":function(t,e){},"5K1I":function(t,e){},BRod:function(t,e){},D34a:function(t,e){},GTtC:function(t,e){},HGxL:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("//Fk"),i=a.n(s),o=a("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=a("VU/8")({name:"App"},n,!1,function(t){a("5K1I")},"data-v-1c69b46b",null).exports,l=a("/ocq"),c=a("DoGJ"),p=a("kMct"),u={components:{ElCol:p.a,ElRow:c.a},name:"el-main",data:function(){return{number:{ip_count:0,app_count:0,update_record_count:0}}},created:function(){this.$http.get(this.$store.state.request_url+"/api/v1/main_count/").then(function(t){console.log(t),this.number=t.data}.bind(this))}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("el-col",{attrs:{span:7}},[a("el-card",{staticStyle:{height:"100px","background-color":"#409EFF"},attrs:{shadow:"always"}},[a("h1",{staticStyle:{"margin-top":"10px","text-align":"center",color:"white"}},[a("strong",[t._v("配置主机数: ")]),t._v(t._s(t.number.ip_count))])])],1),t._v(" "),a("el-col",{attrs:{span:7,offset:1}},[a("el-card",{staticStyle:{height:"100px","background-color":"#409EFF"},attrs:{shadow:"always"}},[a("h1",{staticStyle:{"margin-top":"10px","text-align":"center",color:"white"}},[a("strong",[t._v("配置应用数: ")]),t._v(t._s(t.number.app_count))])])],1),t._v(" "),a("el-col",{attrs:{span:7,offset:1}},[a("el-card",{staticStyle:{height:"100px","background-color":"#409EFF"},attrs:{shadow:"always"}},[a("h1",{staticStyle:{"margin-top":"10px","text-align":"center",color:"white"}},[a("strong",[t._v("总升级次数: ")]),t._v(t._s(t.number.update_record_count))])])],1)],1)},staticRenderFns:[]};var _=a("VU/8")(u,d,!1,function(t){a("HGxL")},"data-v-1775faee",null).exports,m={components:{ElCol:p.a,ElRow:c.a},name:"el-header",data:function(){return{}},methods:{exit:function(){sessionStorage.removeItem("token"),this.$router.push({path:"/login"})}}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"el-header"},[e("el-row",[e("el-col",{attrs:{span:10}},[e("h2",{staticStyle:{color:"white","font-family":"Microsoft YaHei","margin-top":"15px"}},[e("i",{staticClass:"el-icon-menu"}),this._v("\n                应用系统升级平台\n            ")])]),this._v(" "),e("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:2,offset:12}},[e("el-button",{attrs:{type:"success",size:"small",round:"",plain:""},on:{click:this.exit}},[this._v("退出")])],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(m,h,!1,function(t){a("aUYB")},"data-v-d642bb12",null).exports,g={components:{ElCol:p.a},name:"el-aside",data:function(){return{url:"/"}},methods:{},created:function(){this.url=this.$route.path}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-menu",{staticStyle:{position:"absolute",bottom:"0",top:"60px",width:"200px",left:"0px"},attrs:{"background-color":"#545c64","default-active":t.url,"text-color":"#fff","active-text-color":"#ffd04b",router:"","unique-opened":""}},[a("el-menu-item",{attrs:{index:"/"}},[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("首页信息")])]),t._v(" "),a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-setting"}),t._v("主机与应用设置")]),t._v(" "),a("el-menu-item-group",[a("template",{slot:"title"},[t._v("主机登陆类")]),t._v(" "),a("el-menu-item",{attrs:{index:"/hostconf"}},[t._v("主机信息配置")])],2),t._v(" "),a("el-menu-item-group",{attrs:{title:"应用配置类"}},[a("el-menu-item",{attrs:{index:"/apppath"}},[t._v("应用路径配置")])],1)],2),t._v(" "),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-bell"}),t._v("升级任务")]),t._v(" "),a("el-menu-item-group",{attrs:{title:"升级任务类"}},[a("el-menu-item",{attrs:{index:"/update"}},[t._v("开始升级")]),t._v(" "),a("el-menu-item",{attrs:{index:""}},[t._v("预留")])],1)],2),t._v(" "),a("el-submenu",{attrs:{index:"3"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-search"}),t._v("任务信息追溯")]),t._v(" "),a("el-menu-item-group",{attrs:{title:"任务查看类"}},[a("el-menu-item",{attrs:{index:"/history"}},[t._v("查看历史升级任务")]),t._v(" "),a("el-menu-item",{attrs:{index:""}},[t._v("预留")])],1)],2)],1)],1)},staticRenderFns:[]};var b={name:"home",data:function(){return{}},methods:{},components:{Header:f,Aside:a("VU/8")(g,v,!1,function(t){a("pgzb")},"data-v-b988ce08",null).exports}},y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-container",[e("el-header",{staticStyle:{"background-color":"#409EFF"}},[e("Header")],1),this._v(" "),e("el-container",[e("el-aside",{attrs:{width:"200px"}},[e("Aside")],1),this._v(" "),e("el-main",{staticStyle:{"background-color":"#F2F6FC",position:"absolute",top:"60px",bottom:"0",left:"201px",right:"0px"}},[e("router-view")],1)],1)],1)},staticRenderFns:[]};var x=a("VU/8")(b,y,!1,function(t){a("50sj")},"data-v-405ce659",null).exports,w=a("Dd8w"),S=a.n(w),k={components:{ElCol:p.a},name:"hostconf",data:function(){return{activeName:"first",dialogVisible:!1,addFormVisible:!1,lines_index:"",currentPage:1,pageSize:10,line:"",form_index:""}},computed:{tableData:function(){return this.$store.state.hostconf.tableData},dialogFormVisible:{get:function(){return this.$store.state.hostconf.dialogFormVisible},set:function(t){this.$store.commit("set_dialogFormVisible",t)}},form:{get:function(){return this.$store.state.hostconf.form},set:function(t){this.$store.commit("set_form",t)}},fullscreenLoading:{get:function(){return this.$store.state.hostconf.fullscreenLoading},set:function(t){this.$store.commit("set_fullscreenLoading",t)}}},created:function(){this.$store.dispatch("get_ip_list",{currentPage:this.currentPage,pageSize:this.pageSize})},methods:{handleSizeChange:function(t){this.pageSize=t,console.log("每页 "+t+" 条"),this.$store.dispatch("get_ip_list",{currentPage:this.currentPage,pageSize:this.pageSize})},handleCurrentChange:function(t){console.log("当前页: "+t),this.$store.dispatch("get_ip_list",{currentPage:this.currentPage,pageSize:this.pageSize})},handleClick:function(t){this.dialogFormVisible=!0,this.form=S()({},t.row),this.form_index=t.$index,console.log(this.form)},addinit:function(){this.form={IP:"",PORT:"",Password:"",UserName:""},this.addFormVisible=!0},save_data:function(t){this.dialogVisible=!0,this.line=t.row,this.lines_index=t.$index},Delete:function(){this.dialogVisible=!1,""!==this.lines_index?(console.log(this.line,this.lines_index,"22222222222222222222"),this.$store.dispatch("delete",{data:this.line,index:this.lines_index}),this.$store.dispatch("get_ip_list",{currentPage:this.currentPage,pageSize:this.pageSize})):console.log("数据获取失败")},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;console.log(e.form),e.$store.dispatch("get_ip_update",{form:e.form,index:e.form_index})})},addsubmitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;console.log(e.form),e.$store.dispatch("get_ip_add",e.form),e.$store.dispatch("get_ip_list",{currentPage:e.currentPage,pageSize:e.pageSize})})}}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.fullscreenLoading,expression:"fullscreenLoading"}],staticClass:"panel panel-default",staticStyle:{padding:"0"}},[a("div",{staticClass:"panel-heading"},[a("el-row",[a("el-col",{attrs:{span:20}},[a("i",{staticClass:"el-icon-setting"}),t._v(" 主机信息配置\n                ")]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:t.addinit}})],1)],1)],1),t._v(" "),a("div",{staticClass:"panel-body",staticStyle:{"min-height":"500px"}},[a("el-row",[a("el-col",{attrs:{span:14,offset:5}},[a("el-table",{attrs:{fit:"",data:t.tableData.results,border:"",size:"mini",stripe:""}},[a("el-table-column",{attrs:{fixed:"",prop:"id",label:"ID",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"IP",label:"ip",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"PORT",label:"端口",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"UserName",label:"用户名",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleClick(e)}}},[t._v("修改")]),t._v(" "),a("el-button",{staticStyle:{color:"#E6A23C"},attrs:{type:"text",size:"small"},on:{click:function(a){t.save_data(e)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("el-col",{staticStyle:{"margin-top":"50px"},attrs:{span:14,offset:6}},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":t.pageSize,layout:"sizes, prev, pager, next",total:t.tableData.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1)],1)]),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("是否确定删除此记录")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.Delete}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"主机信息修改",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"numberValidateForm",attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"ip地址","label-width":"120px",prop:"IP",rules:[{required:!0,message:"ip不能为空"}]}},[a("el-input",{staticStyle:{width:"50%"},attrs:{"auto-complete":"off"},model:{value:t.form.IP,callback:function(e){t.$set(t.form,"IP",e)},expression:"form.IP"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"端口号","label-width":"120px",prop:"PORT",rules:[{required:!0,message:"端口不能为空"}]}},[a("el-input",{staticStyle:{width:"50%"},attrs:{"auto-complete":"off"},model:{value:t.form.PORT,callback:function(e){t.$set(t.form,"PORT",e)},expression:"form.PORT"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"用户名","label-width":"120px",prop:"UserName",rules:[{required:!0,message:"用户名不能为空"}]}},[a("el-input",{staticStyle:{width:"50%"},attrs:{"auto-complete":"off"},model:{value:t.form.UserName,callback:function(e){t.$set(t.form,"UserName",e)},expression:"form.UserName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"服务器密码","label-width":"120px",prop:"Password",rules:[{required:!0,message:"密码不能为空"}]}},[a("el-input",{staticStyle:{width:"50%"},attrs:{type:"password","auto-complete":"off"},model:{value:t.form.Password,callback:function(e){t.$set(t.form,"Password",e)},expression:"form.Password"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("numberValidateForm")}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"主机信息添加",visible:t.addFormVisible},on:{"update:visible":function(e){t.addFormVisible=e}}},[a("el-form",{ref:"addValidateForm",attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"ip地址","label-width":"120px",prop:"IP",rules:[{required:!0,message:"ip不能为空"}]}},[a("el-input",{staticStyle:{width:"50%"},attrs:{"auto-complete":"off"},model:{value:t.form.IP,callback:function(e){t.$set(t.form,"IP",e)},expression:"form.IP"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"端口号","label-width":"120px",prop:"PORT",rules:[{required:!0,message:"端口不能为空"}]}},[a("el-input",{staticStyle:{width:"50%"},attrs:{"auto-complete":"off"},model:{value:t.form.PORT,callback:function(e){t.$set(t.form,"PORT",e)},expression:"form.PORT"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"用户名","label-width":"120px",prop:"UserName",rules:[{required:!0,message:"用户名不能为空"}]}},[a("el-input",{staticStyle:{width:"50%"},attrs:{"auto-complete":"off"},model:{value:t.form.UserName,callback:function(e){t.$set(t.form,"UserName",e)},expression:"form.UserName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"服务器密码","label-width":"120px",prop:"Password",rules:[{required:!0,message:"密码不能为空"}]}},[a("el-input",{staticStyle:{width:"50%"},attrs:{type:"password","auto-complete":"off"},model:{value:t.form.Password,callback:function(e){t.$set(t.form,"Password",e)},expression:"form.Password"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addsubmitForm("addValidateForm")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var C=a("VU/8")(k,$,!1,function(t){a("Ru3I")},"data-v-9927fee2",null).exports,P={components:{ElCol:p.a},name:"hostconf",data:function(){return{path_activeName:"first",path_dialogVisible:!1,path_addFormVisible:!1,lines_index:"",line:"",currentPage:1,pageSize:10,path_form_index:""}},created:function(){this.$store.dispatch("get_apppath_list",{currentPage:this.currentPage,pageSize:this.pageSize}),this.$store.dispatch("get_app_ip_list")},computed:{getbasedata:function(){return this.$store.state.apppath.base_data},tableData:function(){return this.$store.state.apppath.tableData},path_dialogFormVisible:{get:function(){return this.$store.state.apppath.path_dialogFormVisible},set:function(t){this.$store.commit("set_path_dialogFormVisible",t)}},path_fullscreenLoading:{get:function(){return this.$store.state.apppath.path_fullscreenLoading},set:function(t){this.$store.commit("set_path_fullscreenLoading",t)}},path_form:{get:function(){return this.$store.state.apppath.form},set:function(t){this.$store.commit("set_app_form",t)}},fullscreenLoading:{get:function(){return this.$store.state.apppath.fullscreenLoading},set:function(t){this.$store.commit("set_fullscreenLoading",t)}}},methods:{path_handleSizeChange:function(t){console.log("每页 "+t+" 条"),this.pageSize=t,this.$store.dispatch("get_apppath_list",{currentPage:this.currentPage,pageSize:this.pageSize})},path_handleCurrentChange:function(t){console.log("当前页: "+t),this.$store.dispatch("get_apppath_list",{currentPage:this.currentPage,pageSize:this.pageSize})},path_handleClick:function(t){this.path_dialogFormVisible=!0,this.path_form=S()({},t.row),this.path_form_index=t.$index,console.log(t)},path_addinit:function(){this.path_form={},this.path_addFormVisible=!0},path_save_data:function(t){this.path_dialogVisible=!0,this.line=t.row,this.lines_index=t.$index},path_Delete:function(){this.path_dialogVisible=!1,console.log(this.lines_index),""!==this.lines_index?(this.$store.dispatch("app_delete",{data:this.line,index:this.lines_index}),this.$store.dispatch("get_apppath_list",{currentPage:this.currentPage,pageSize:this.pageSize})):console.log("数据获取失败")},path_submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;console.log(e.$refs,"cccccccccccc"),e.$store.dispatch("get_app_update",{form:e.path_form,index:e.path_form_index})})},path_addsubmitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$store.dispatch("get_app_add",e.path_form),e.$store.dispatch("get_apppath_list",{currentPage:e.currentPage,pageSize:e.pageSize})})}},mounted:function(){console.log("mounted")}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.path_fullscreenLoading,expression:"path_fullscreenLoading"}],staticClass:"panel panel-default",staticStyle:{padding:"0"}},[a("div",{staticClass:"panel-heading"},[a("el-row",[a("el-col",{attrs:{span:20}},[a("i",{staticClass:"el-icon-setting"}),t._v(" 应用路径配置\n                ")]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:t.path_addinit}})],1)],1)],1),t._v(" "),a("div",{staticClass:"panel-body",staticStyle:{"min-height":"500px"}},[a("el-row",[a("el-col",{attrs:{span:18,offset:3}},[a("el-table",{attrs:{fit:"",data:t.tableData.results,border:"",size:"mini",stripe:""}},[a("el-table-column",{attrs:{fixed:"",prop:"id",label:"ID",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"App",label:"应用名称",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"AIP",label:"所在服务器ip",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"DIR",label:"程序路径",width:"260"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.path_handleClick(e)}}},[t._v("修改\n                                ")]),t._v(" "),a("el-button",{staticStyle:{color:"#E6A23C"},attrs:{type:"text",size:"small"},on:{click:function(a){t.path_save_data(e)}}},[t._v("删除\n                                ")])]}}])})],1)],1),t._v(" "),a("el-col",{staticStyle:{"margin-top":"50px"},attrs:{span:14,offset:6}},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":t.pageSize,layout:"sizes, prev, pager, next",total:t.tableData.count},on:{"size-change":t.path_handleSizeChange,"current-change":t.path_handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1)],1)]),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.path_dialogVisible,width:"30%"},on:{"update:visible":function(e){t.path_dialogVisible=e}}},[a("span",[t._v("是否确定删除此记录")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.path_dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.path_Delete}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"应用信息修改",visible:t.path_dialogFormVisible},on:{"update:visible":function(e){t.path_dialogFormVisible=e}}},[a("el-form",{ref:"path_numberValidateForm",attrs:{model:t.path_form}},[a("el-form-item",{attrs:{label:"应用名称","label-width":"120px",prop:"App",rules:[{required:!0,message:"应用路径不能为空"}]}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.path_form.App,callback:function(e){t.$set(t.path_form,"App",e)},expression:"path_form.App"}},t._l(t.getbasedata.app,function(t){return a("el-option",{key:t,attrs:{value:t}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"服务器ip","label-width":"120px",prop:"AIP",rules:[{required:!0,message:"应用路径不能为空"}]}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.path_form.AIP,callback:function(e){t.$set(t.path_form,"AIP",e)},expression:"path_form.AIP"}},t._l(t.getbasedata.ip,function(t){return a("el-option",{key:t,attrs:{value:t}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"应用路径","label-width":"120px",prop:"DIR",rules:[{required:!0,message:"应用路径不能为空"}]}},[a("el-input",{staticStyle:{width:"50%"},attrs:{"auto-complete":"off"},model:{value:t.path_form.DIR,callback:function(e){t.$set(t.path_form,"DIR",e)},expression:"path_form.DIR"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.path_dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.path_submitForm("path_numberValidateForm")}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"应用信息添加",visible:t.path_addFormVisible},on:{"update:visible":function(e){t.path_addFormVisible=e}}},[a("el-form",{ref:"path_addValidateForm",attrs:{model:t.path_form}},[a("el-form-item",{attrs:{label:"应用名称","label-width":"120px",prop:"App",rules:[{required:!0,message:"应用路径不能为空"}]}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.path_form.App,callback:function(e){t.$set(t.path_form,"App",e)},expression:"path_form.App"}},t._l(t.getbasedata.app,function(t){return a("el-option",{key:t,attrs:{value:t}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"服务器ip","label-width":"120px",prop:"AIP",rules:[{required:!0,message:"应用路径不能为空"}]}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.path_form.AIP,callback:function(e){t.$set(t.path_form,"AIP",e)},expression:"path_form.AIP"}},t._l(t.getbasedata.ip,function(t){return a("el-option",{key:t,attrs:{value:t}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"应用路径","label-width":"120px",prop:"DIR",rules:[{required:!0,message:"应用路径不能为空"}]}},[a("el-input",{staticStyle:{width:"50%"},attrs:{"auto-complete":"off"},model:{value:t.path_form.DIR,callback:function(e){t.$set(t.path_form,"DIR",e)},expression:"path_form.DIR"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.path_addFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.path_addsubmitForm("path_addValidateForm")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var V=a("VU/8")(P,F,!1,function(t){a("BRod")},"data-v-12ac4c42",null).exports,z={components:{ElCol:p.a,ElRow:c.a},name:"el-upgrade",data:function(){return{number:0,commit_data:"进行 下一步",active:"ok",centerDialogVisible:!1}},props:["select","change"],computed:{get_run_task:function(){return this.$store.state.update.run_task},check_run:function(){return this.$store.state.update.check_run},button_status:function(){return this.$store.state.update.button_status},upgrade_status:function(){return this.$store.state.update.upgrade_status},display_result:function(){return this.$store.state.update.display_result}},methods:{Next:function(){if(0===this.number)console.log("00000"),this.$store.dispatch("run_check",{data:this.select.join(",")}),setTimeout(function(){this.$store.dispatch("get_ip_status")}.bind(this),100),this.number++;else if(1===this.number){var t=!0;for(var e in this.check_run)this.check_run[e]||(t=!1);t?(this.number++,this.$store.dispatch("run_upgrade",{data:this.select.join(",")}),setTimeout(function(){this.$store.dispatch("get_upgrade_status")}.bind(this),100)):this.$message.error("有服务器登陆失败，请解决后执行下一步！")}else 2===this.number?!1===this.get_run_task.status?this.centerDialogVisible=!0:this.confirm_run():3===this.number?(this.commit_data="升级完毕",this.number++):(this.number=0,this.commit_data="进行 下一步",this.$emit("update:change",!0))},Home:function(){this.number=0,this.$emit("update:change",!0)},confirm_run:function(){this.centerDialogVisible&&(this.centerDialogVisible=!1),this.number++,this.$store.dispatch("get_result")}}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("el-col",[a("el-steps",{attrs:{active:t.number,"finish-status":"success",simple:""}},[a("el-step",{attrs:{title:"准备部署"}}),t._v(" "),a("el-step",{attrs:{title:"地址连通性检查"}}),t._v(" "),a("el-step",{attrs:{title:"开始部署"}}),t._v(" "),a("el-step",{attrs:{title:"报告生成"}})],1)],1),t._v(" "),a("el-col",[a("el-col",{staticClass:"test-1",staticStyle:{"max-height":"400px","min-height":"400px","overflow-y":"auto"},attrs:{span:20,offset:2}},[a("transition",{attrs:{"enter-active-class":"animated fadeInRight"}},[a("el-col",{directives:[{name:"show",rawName:"v-show",value:0===t.number,expression:"number === 0"}],staticStyle:{"margin-top":"80px"},attrs:{span:6,offset:9}},[a("h1",[t._v("准备部署!")])])],1),t._v(" "),a("transition",{attrs:{"enter-active-class":"animated fadeInRight"}},[a("el-col",{directives:[{name:"show",rawName:"v-show",value:1===t.number,expression:"number === 1"}]},[a("el-tabs",{staticClass:"test-1",staticStyle:{height:"300px","margin-top":"20px","overflow-y":"auto"},attrs:{"tab-position":"left"}},[a("el-tab-pane",{attrs:{label:"连通性检查"}},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[t._v("ID")]),t._v(" "),a("th",[t._v("服务器IP")]),t._v(" "),a("th",[t._v("状态")])])]),t._v(" "),a("tbody",t._l(t.check_run,function(e,s,i){return a("tr",{key:s},[a("td",{domProps:{textContent:t._s(i+1)}}),t._v(" "),a("td",[t._v(t._s(s))]),t._v(" "),a("td",1==e?[a("i",{staticClass:"el-icon-success",staticStyle:{color:"#67C23A"}})]:0==e?[a("i",{staticClass:"el-icon-error",staticStyle:{color:"#F56C6C"}})]:[a("i",{staticClass:"el-icon-loading",staticStyle:{color:"#909399"}})])])}))])])],1)],1)],1),t._v(" "),a("transition",{attrs:{"enter-active-class":"animated fadeInRight"}},[a("el-col",{directives:[{name:"show",rawName:"v-show",value:2===t.number,expression:"number === 2"}]},[a("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:19,offset:5}},[a("el-tag",{attrs:{type:"info"}},[t._v("升级应用状态：")]),t._v(" "),t._l(t.get_run_task.ok_list,function(e,s){return a("el-tag",{key:e},[t._v(t._s(e)+"  "),a("i",{staticClass:"el-icon-success",staticStyle:{color:"#67C23A"}})])}),t._v(" "),t._l(t.get_run_task.error_list,function(e,s){return a("el-tag",{key:e},[t._v(t._s(e)+"  "),a("i",{staticClass:"el-icon-error",staticStyle:{color:"#F56C6C"}})])}),t._v(" "),t._l(t.get_run_task.not_run_list,function(e,s){return a("el-tag",{key:e},[t._v(t._s(e)+"  "),a("i",{staticClass:"el-icon-loading",staticStyle:{color:"#909399"}})])})],2),t._v(" "),a("el-col",[a("el-tabs",{staticClass:"test-1",staticStyle:{height:"270px","margin-top":"20px","overflow-y":"auto"},attrs:{"tab-position":"left"},model:{value:t.get_run_task.active,callback:function(e){t.$set(t.get_run_task,"active",e)},expression:"get_run_task.active"}},t._l(t.get_run_task.data,function(e,s){return a("el-tab-pane",{key:s,attrs:{label:e.name,name:e.name}},[a("el-alert",{staticStyle:{"margin-bottom":"3px"},attrs:{title:"应用执行状态",type:"info",closable:!1,center:"","show-icon":""}}),t._v(" "),t._l(e.result,function(e,s){return a("el-col",{key:s},[e.status?a("el-alert",{staticStyle:{"margin-bottom":"3px"},attrs:{title:e.ip,type:"success",closable:!1}},[t._v(": 升级成功!")]):!1===e.status?a("el-alert",{staticStyle:{"margin-bottom":"3px"},attrs:{title:e.ip,type:"error",closable:!1}},[t._v(": "+t._s(e.message))]):t._e()],1)})],2)}))],1)],1)],1),t._v(" "),a("transition",{attrs:{"enter-active-class":"animated fadeInRight"}},[a("el-col",{directives:[{name:"show",rawName:"v-show",value:3===t.number,expression:"number === 3"}]},[a("el-tabs",{staticClass:"test-1",staticStyle:{height:"310px","margin-top":"20px","overflow-y":"auto"},attrs:{"tab-position":"left"}},[a("el-tab-pane",{attrs:{label:"报告生成"}},[a("el-col",[a("el-alert",{staticStyle:{"margin-bottom":"3px"},attrs:{title:"升级报告",type:"info",closable:!1,center:"","show-icon":""}}),t._v(" "),a("transition",{attrs:{"enter-active-class":"animated flipInX"}},[t.display_result?a("el-form",{attrs:{"label-position":"right","label-width":"120px"}},[a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"ID:"}},[a("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.upgrade_status.id))])],1),t._v(" "),a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"时间:"}},[a("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.upgrade_status.UpdateTime))])],1),t._v(" "),a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"升级的应用:"}},[a("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.upgrade_status.UpdateApp))])],1),t._v(" "),a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"备份点:"}},[a("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.upgrade_status.BackDir))])],1),t._v(" "),a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"耗时:"}},[a("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.upgrade_status.ElapsedTime)+"s")])],1),t._v(" "),a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"状态:"}},[t.upgrade_status.UpdateAppStatus?a("el-tag",{attrs:{type:"success"}},[t._v("升级成功")]):a("el-col",[a("el-tag",{attrs:{type:"danger"}},[t._v("升级失败")]),t._v(" "),t._l(t.get_run_task.error_list,function(e,s){return a("el-tag",{key:e,attrs:{type:"danger"}},[t._v(t._s(e))])})],2)],1)],1):t._e()],1)],1)],1)],1)],1)],1),t._v(" "),a("transition",{attrs:{"enter-active-class":"animated fadeInRight"}},[a("el-col",{directives:[{name:"show",rawName:"v-show",value:4===t.number,expression:"number === 4"}],staticStyle:{"margin-top":"80px"},attrs:{span:6,offset:9}},[a("h1",[t._v("部署完成!")])])],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:3,offset:3}},[a("el-button",{attrs:{type:"success",round:""},on:{click:t.Home}},[t._v("返回升级 首页")])],1),t._v(" "),a("el-col",{attrs:{span:3,offset:13}},[a("el-button",{attrs:{type:"primary",loading:t.button_status,round:""},on:{click:t.Next}},[t._v(t._s(t.commit_data))])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("span",{staticStyle:{color:"#409EFF"}},[t._v("       升级时有错误 (是/否) 继续执行???")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.confirm_run}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var I=a("VU/8")(z,D,!1,function(t){a("hF2V")},"data-v-c2a017c4",null).exports,R={components:{ElRow:c.a,ElCol:p.a,Upgrade:I},name:"el-update",data:function(){return{select:[],change:!0}},methods:{reget_update_list:function(){this.select=[],this.$store.dispatch("get_update_list")},start_update:function(){""==this.select?this.$message.error("没有选择需要升级的应用"):(console.log(this.select.join(",")),this.change=!1)}},computed:{get_all_app:function(){return this.$store.state.update.all_app},get_update_list:function(){return this.$store.state.update.update_list},loading:function(){return this.$store.state.update.loading}},created:function(){this.$store.dispatch("get_app_list"),this.$store.dispatch("get_help_message"),this.$store.dispatch("get_update_list")}},q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"panel panel-default",staticStyle:{padding:"0"}},[a("div",{staticClass:"panel-heading"},[a("el-row",[a("el-col",{attrs:{span:20}},[a("i",{staticClass:"el-icon-bell"}),t._v(" 开始升级\n                ")])],1)],1),t._v(" "),a("div",{staticClass:"panel-body",staticStyle:{"min-height":"500px"}},[a("transition",{attrs:{"enter-active-class":"animated bounceInRight"}},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:!t.change,expression:"!change"}]},[a("Upgrade",{attrs:{select:t.select,change:t.change},on:{"update:change":function(e){t.change=e}}})],1)],1),t._v(" "),a("transition",{attrs:{"enter-active-class":"animated bounceInDown"}},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.change,expression:"change"}]},[a("el-col",{attrs:{span:5}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"panel panel-default",staticStyle:{padding:"0"}},[a("div",{staticClass:"panel-heading",staticStyle:{"background-color":"#409EFF"}},[a("el-row",[a("el-col",{staticStyle:{color:"white"}},[t._v("\n                                    所有应用列表\n                                ")])],1)],1),t._v(" "),a("div",{staticClass:"panel-body test-1",staticStyle:{"min-height":"500px","max-height":"500px","overflow-y":"auto"}},[a("el-tree",{attrs:{"empty-text":"暂无数据列表",data:t.get_all_app,"node-key":"id","default-expand-all":""}})],1)])]),t._v(" "),a("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:19}},[a("div",{staticClass:"panel panel-default",staticStyle:{padding:"0"}},[a("div",{staticClass:"panel-heading",staticStyle:{"background-color":"#409EFF"}},[a("el-row",[a("el-col",{staticStyle:{color:"white"},attrs:{span:20}},[t._v("\n                                    可升级的程序选择\n                                ")])],1)],1),t._v(" "),a("div",{staticClass:"panel-body",staticStyle:{"min-height":"500px"}},[a("div",{staticClass:"row",staticStyle:{"text-align":"center","margin-top":"30px"}},[a("el-transfer",{staticStyle:{"text-align":"left",display:"inline-block"},attrs:{titles:["待选升级应用","已选升级应用"],"button-texts":["放弃升级","准备升级"],format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},data:t.get_update_list},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}}),t._v(" "),a("div",{staticClass:"row",staticStyle:{"margin-top":"2px"}},[a("el-button",{staticStyle:{"margin-right":"76px",width:"198px"},attrs:{slot:"left-footer",size:"mini",type:"success"},on:{click:t.reget_update_list},slot:"left-footer"},[t._v("\n                                      获取待升级列表\n                                  ")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"76px",width:"198px"},attrs:{slot:"right-footer",size:"mini",type:"success"},on:{click:t.start_update},slot:"right-footer"},[t._v("\n                                      准备开始升级\n                                  ")])],1)],1)])])])],1)],1)],1)])])},staticRenderFns:[]};var N=a("VU/8")(R,q,!1,function(t){a("D34a")},"data-v-74d17e85",null).exports,A={components:{ElCol:p.a},name:"histroy",data:function(){return{currentPage:1,pageSize:10,dialogTableVisible:!1,get_run_task:{}}},computed:{fullscreenLoading:function(){return this.$store.state.history.history_fullscreenLoading},tableData:function(){return this.$store.state.history.tableData}},created:function(){this.$store.dispatch("get_history_list",{currentPage:this.currentPage,pageSize:this.pageSize})},methods:{handleClick:function(t){this.dialogTableVisible=!0,t.Detail_Status?this.get_run_task=JSON.parse(t.Detail_Status.U_Status):this.get_run_task=!1},handleSizeChange:function(t){console.log("每页 "+t+" 条"),this.pageSize=t,this.$store.dispatch("get_history_list",{currentPage:this.currentPage,pageSize:this.pageSize})},handleCurrentChange:function(t){console.log("当前页: "+t),this.$store.dispatch("get_history_list",{currentPage:this.currentPage,pageSize:this.pageSize})},filterTag:function(t,e){return e.UpdateAppStatus===t}}},U={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"panel panel-default",staticStyle:{padding:"0"}},[a("div",{staticClass:"panel-heading"},[a("el-row",[a("el-col",{attrs:{span:20}},[a("i",{staticClass:"el-icon-search"}),t._v(" 历史升级任务查看\n                ")])],1)],1),t._v(" "),a("div",{staticClass:"panel-body",staticStyle:{"min-height":"500px"}},[a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.fullscreenLoading,expression:"fullscreenLoading"}]},[a("el-col",{attrs:{span:24}},[a("el-table",{attrs:{fit:"",data:t.tableData.results,border:"",size:"mini",stripe:""}},[a("el-table-column",{attrs:{fixed:"",prop:"id",label:"ID",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"UpdateTime",label:"升级时间",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"UpdateApp",label:"升级应用"}}),t._v(" "),a("el-table-column",{attrs:{prop:"BackDir",label:"备份点",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ElapsedTime",label:"耗时(s)",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"F_app",label:"失败应用",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"UpdateAppStatus",label:"升级状态",width:"100",filters:[{text:"成功",value:!0},{text:"失败",value:!1}],"filter-method":t.filterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:!0===e.row.UpdateAppStatus?"success":"danger","disable-transitions":""},domProps:{textContent:t._s(!0===e.row.UpdateAppStatus?"成功":"失败")}})]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"详细",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleClick(e.row)}}},[t._v("查看")])]}}])})],1)],1),t._v(" "),a("el-col",{staticStyle:{"margin-top":"50px"},attrs:{span:14,offset:6}},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":t.pageSize,layout:"sizes, prev, pager, next",total:t.tableData.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1)],1)]),t._v(" "),a("el-dialog",{attrs:{title:"结果详细信息",visible:t.dialogTableVisible,width:"60%"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[0==t.get_run_task?a("div",{staticStyle:{"text-align":"center"}},[a("h2",[t._v("暂无结果")])]):a("el-tabs",{staticClass:"test-1",staticStyle:{height:"270px","margin-top":"20px","overflow-y":"auto"},attrs:{"tab-position":"left"},model:{value:t.get_run_task.active,callback:function(e){t.$set(t.get_run_task,"active",e)},expression:"get_run_task.active"}},t._l(t.get_run_task.data,function(e,s){return a("el-tab-pane",{key:s,attrs:{label:e.name,name:e.name}},[a("el-alert",{staticStyle:{"margin-bottom":"3px"},attrs:{title:"应用执行状态",type:"info",closable:!1,center:"","show-icon":""}}),t._v(" "),t._l(e.result,function(e,s){return a("el-col",{key:s},[e.status?a("el-alert",{staticStyle:{"margin-bottom":"3px"},attrs:{title:e.ip,type:"success",closable:!1}},[t._v(": 升级成功!")]):!1===e.status?a("el-alert",{staticStyle:{"margin-bottom":"3px"},attrs:{title:e.ip,type:"error",closable:!1}},[t._v(": "+t._s(e.message))]):t._e()],1)})],2)}))],1)],1)},staticRenderFns:[]};var E=a("VU/8")(A,U,!1,function(t){a("NpJN")},"data-v-5c541e3e",null).exports,L={components:{ElRow:c.a},name:"el-login",data:function(){return{form_data:{UserName:"",PassWord:""}}},methods:{submit:function(){this.form_data.UserName&&this.form_data.PassWord?(console.log("开始登陆"),this.$store.dispatch("login",this.form_data)):this.$message.error("用户名与密码不能为空")}}},T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bj"},[a("div",{staticClass:"container"},[a("section",{attrs:{id:"content"}},[a("form",{attrs:{action:""}},[a("h1",[t._v("用户登录")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form_data.UserName,expression:"form_data.UserName"}],attrs:{type:"text",placeholder:"用户",required:"",id:"username"},domProps:{value:t.form_data.UserName},on:{input:function(e){e.target.composing||t.$set(t.form_data,"UserName",e.target.value)}}})]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form_data.PassWord,expression:"form_data.PassWord"}],attrs:{type:"password",placeholder:"密码",required:"",id:"password"},domProps:{value:t.form_data.PassWord},on:{input:function(e){e.target.composing||t.$set(t.form_data,"PassWord",e.target.value)}}})]),t._v(" "),t._m(0),t._v(" "),a("div",[a("input",{staticClass:"btn btn-primary",attrs:{type:"button",value:"登录",id:"js-btn-login"},on:{click:t.submit}})])]),t._v(" "),t._m(1)])]),t._v(" "),a("br"),a("br"),a("br"),a("br"),t._v(" "),t._m(2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{},[e("span",{staticClass:"help-block u-errormessage",attrs:{id:"js-server-helpinfo"}},[this._v(" ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"button"},[e("span",{staticClass:"help-block u-errormessage",attrs:{id:"js-server-helpinfo"}},[this._v(" ")]),this._v(" "),e("a",{attrs:{href:"#"}},[this._v("欢迎使用")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{"text-align":"center"}},[e("p",[this._v("各平台升级系统 --- 2018")])])}]};var O=a("VU/8")(L,T,!1,function(t){a("/ONX")},"data-v-19799263",null).exports;o.default.use(l.a);var j=new l.a({routes:[{path:"",name:"home",component:x,children:[{path:"/",name:"main",component:_},{path:"/hostconf",name:"hostconf",component:C},{path:"/apppath",name:"apppath",component:V},{path:"/update",name:"update",component:N},{path:"/history",name:"history",component:E}]},{path:"/login",name:"login",component:O}],mode:"history"}),H=a("NYxO"),W=a("zL8q"),B=a.n(W),G=(a("tvR6"),a("aozt")),J=a.n(G),Y=(a("0nQ+"),a("GTtC"),a("mvHQ")),M=a.n(Y),Q={state:{update_list:[],loading:!0,all_app:[],interval:"",check_run:{},button_status:!1,upgrade_status:{},run_task:{},display_result:!1},actions:{get_update_list:function(t){t.state;var e=t.commit,a=t.rootState;o.default.http.get(a.request_url+"/appupdate/v1/app_up_list/").then(function(t){console.log(t.data),t.data.message?(window.app.$message({showClose:!0,message:t.data.message,type:"error"}),console.log(t.data)):(e("set_update_list",t.data.update_list),"[]"!==M()(t.data.error_list)&&window.app.$message({showClose:!0,message:"未知应用包 :"+t.data.error_list.join(","),type:"error"}))})},get_app_list:function(t){t.state;var e=t.commit,a=t.rootState;o.default.http.get(a.request_url+"/appupdate/v1/app_info/").then(function(t){console.log(t),e("set_all_app",t.data),e("set_loading",!1)})},get_help_message:function(t){t.state,t.commit;var e=t.rootState;o.default.http.get(e.request_url+"/api/v1/app_uppackge_dir/").then(function(t){window.app.$notify({title:"帮助信息",type:"warning",duration:5e3,message:t.data.message})})},run_check:function(t,e){var a=t.state,s=(t.commit,t.rootState);a.button_status=!0,o.default.http.post(s.request_url+"/appupdate/v1/check/",e,{transformRequest:[function(t){var e="";for(var a in t)e+=a+"="+t[a]+"&";return e}]}).then(function(t){window.app.$message({message:"执行完毕",type:"success"}),clearInterval(a.interval),a.check_run=t.data,a.button_status=!1}).catch(function(t){console.log(t,"error")})},get_ip_status:function(t){var e=t.state,a=(t.commit,t.rootState),s=setInterval(function(){o.default.http.get(a.request_url+"/appupdate/v1/ip_status/").then(function(t){console.log(t.data),e.check_run=t.data})},500);e.interval=s},run_upgrade:function(t,e){var a=t.state,s=(t.commit,t.rootState);a.button_status=!0,o.default.http.post(s.request_url+"/appupdate/v1/app_update/",e,{transformRequest:[function(t){var e="";for(var a in t)e+=a+"="+t[a]+"&";return e}]}).then(function(t){window.app.$message({message:"执行完毕",type:"success"}),clearInterval(a.interval),a.run_task=t.data,a.button_status=!1}).catch(function(t){console.log(t,"error")})},get_upgrade_status:function(t){var e=t.state,a=(t.commit,t.rootState),s=setInterval(function(){o.default.http.get(a.request_url+"/appupdate/v1/app_update_status/").then(function(t){console.log(t.data),e.run_task=t.data})},500);e.interval=s},get_result:function(t){var e=t.state,a=(t.commit,t.rootState);e.button_status=!0,e.display_result=!1,o.default.http.get(a.request_url+"/appupdate/v1/update_status_record/").then(function(t){console.log(t.data),e.upgrade_status=t.data,e.display_result=!0,e.button_status=!1})}},mutations:{set_update_list:function(t,e){console.log(e,"2222222222222222"),t.update_list=e},set_all_app:function(t,e){t.all_app=e},set_loading:function(t,e){t.loading=e}}},X=(a("mw3O"),{state:{tableData:{},error:"",dialogFormVisible:!1,fullscreenLoading:!0,form:{}},actions:{get_ip_list:function(t,e){t.state;var a=t.commit,s=t.rootState;console.log(s.request_url),o.default.http.get(s.request_url+"/api/v1/ip/",{params:e}).then(function(t){console.log(t),a("set_ip_list",t.data),a("set_fullscreenLoading",!1)})},get_ip_update:function(t,e){t.state;var a=t.commit,s=t.rootState;o.default.http.put(s.request_url+"/api/v1/ip/"+e.form.id+"/",{data:e.form}).then(function(t){t.data.error?window.app.$message.error("错误信息："+t.data.error):(window.app.$message.success("IP: "+e.form.IP+" 更新成功！"),console.log(t),a("change_ip_list",{index:e.index,data:e.form}),a("set_dialogFormVisible",!1))})},get_ip_add:function(t,e){t.state;var a=t.commit,s=t.rootState;o.default.http.post(s.request_url+"/api/v1/ip/",{data:e}).then(function(t){if(console.log(t,"6666666666666666"),t.data.error)return console.log(t.data.error),window.app.$message.error(t.data.error),!1;a("append_ip_list",t.data),window.app.$notify({title:"成功",message:"成功添加一条 IP："+t.data.IP,type:"success"})}).catch(function(t){console.log(t,"error")})},delete:function(t,e){t.state;var a=t.commit,s=t.rootState;o.default.http.delete(s.request_url+"/api/v1/ip/"+e.data.id+"/").then(function(t){console.log(e.index),a("delete_ip_list",e.index),window.app.$message.success("IP: "+e.data.IP+" 删除成功！")})}},mutations:{set_ip_list:function(t,e){t.tableData=e},delete_ip_list:function(t,e){console.log(e,t.tableData.results),t.tableData.results.splice(e,1)},change_ip_list:function(t,e){t.tableData.results.splice(e.index,1,e.data)},append_ip_list:function(t,e){t.tableData.count++,t.tableData.results.length<10?t.tableData.results.push(e):console.log("大于10个不添加")},set_error:function(t,e){t.error=e},set_dialogFormVisible:function(t,e){t.dialogFormVisible=e},set_form:function(t,e){t.form=e},set_fullscreenLoading:function(t,e){t.fullscreenLoading=e}}}),K={state:{tableData:[],error:"",path_fullscreenLoading:!0,path_dialogFormVisible:!1,form:{},base_data:{}},actions:{get_app_ip_list:function(t){t.state;var e=t.commit,a=t.rootState;o.default.http.get(a.request_url+"/api/v1/app_ip/").then(function(t){console.log(t),e("set_base_data",t.data)})},get_apppath_list:function(t,e){t.state;var a=t.commit,s=t.rootState;console.log(s.request_url),o.default.http.get(s.request_url+"/api/v1/app/",{params:e}).then(function(t){console.log(t),a("set_apppath_list",t.data),a("set_path_fullscreenLoading",!1)})},get_app_update:function(t,e){t.state;var a=t.commit,s=t.rootState;o.default.http.put(s.request_url+"/api/v1/app/"+e.form.id+"/",e.form,{transformRequest:[function(t){var e="";for(var a in t)e+=a+"="+t[a]+"&";return e}]}).then(function(t){t.data.error?window.app.$message.error("错误信息："+t.data.error):(window.app.$message.success("APP: "+e.form.App+" 更新成功！"),console.log(t),a("change_app_list",{index:e.index,data:e.form}),a("set_path_dialogFormVisible",!1))})},get_app_add:function(t,e){t.state;var a=t.commit,s=t.rootState;o.default.http.post(s.request_url+"/api/v1/app/",e,{transformRequest:[function(t){var e="";for(var a in t)e+=a+"="+t[a]+"&";return e}]}).then(function(t){console.log(t,"6666666666666666"),t.data.error?(console.log(t.data.error),window.app.$message.error(t.data.error)):(a("append_app_list",t.data),window.app.$notify({title:"成功",message:"成功添加一条 APP："+t.data.App,type:"success"}))}).catch(function(t){console.log(t,"error")})},app_delete:function(t,e){t.state;var a=t.commit,s=t.rootState;o.default.http.delete(s.request_url+"/api/v1/app/"+e.data.id+"/").then(function(t){console.log(e.index),a("app_delete_ip_list",e.index),window.app.$message.success("APP: "+e.data.App+" 删除成功！")})}},mutations:{set_base_data:function(t,e){t.base_data=e},set_apppath_list:function(t,e){t.tableData=e},change_app_list:function(t,e){t.tableData.results.splice(e.index,1,e.data)},app_delete_ip_list:function(t,e){console.log(e,t.tableData.results),t.tableData.results.splice(e,1)},append_app_list:function(t,e){t.tableData.count++,t.tableData.results.length<10?t.tableData.results.push(e):console.log("大于10个不添加")},app_set_error:function(t,e){t.error=e},set_path_dialogFormVisible:function(t,e){t.path_dialogFormVisible=e},set_app_form:function(t,e){t.form=e},set_path_fullscreenLoading:function(t,e){t.path_fullscreenLoading=e}}},Z={state:{tableData:[],history_fullscreenLoading:!0},actions:{get_history_list:function(t,e){t.state;var a=t.commit,s=t.rootState;o.default.http.get(s.request_url+"/appupdate/v1/app_update_record/",{params:e}).then(function(t){console.log(t),a("set_history_list",t.data),a("set_history_fullscreenLoading",!1)})}},mutations:{set_history_list:function(t,e){t.tableData=e},set_history_fullscreenLoading:function(t,e){t.history_fullscreenLoading=e}}},tt={state:{tableData:[],history_fullscreenLoading:!0},actions:{login:function(t,e){t.state,t.commit;var a=t.rootState;o.default.http.post(a.request_url+"/api/v1/login/",e,{transformRequest:[function(t){var e="";for(var a in t)e+=a+"="+t[a]+"&";return e}]}).then(function(t){console.log(t,t.data.msg),!0===t.data.msg?(sessionStorage.setItem("token",t.data.token),window.app.$router.push({path:"/"})):window.app.$message.error(t.data.msg)})}},mutations:{}};o.default.use(B.a),o.default.use(H.a);var et=["login"];j.beforeEach(function(t,e,a){return sessionStorage.getItem("token")||-1!==et.indexOf(t.name)?a():(it&&it.$message({type:"warning",message:"未授权，请登陆授权后继续"}),a({name:"login"}))}),J.a.defaults.validateStatus=function(t){return t<500},J.a.interceptors.request.use(function(t){var e=sessionStorage.getItem("token");return t.headers.Authorization=e,t}),J.a.interceptors.response.use(function(t){return 403===t.status?(it&&it.$message({type:"warning",message:"登录身份过期，请重新登录。"}),sessionStorage.removeItem("token"),j.push({name:"login"}),i.a.reject(new Error("身份过期"))):t},function(t){return it.$notify.error({title:"服务错误",message:"服务器响应错误 "+t.message}),i.a.reject(t)}),o.default.prototype.$http=J.a,o.default.http=J.a,o.default.config.productionTip=!1;var at=window.location.host,st=new H.a.Store({state:{request_url:"http://"+at},mutations:{},actions:{},modules:{update:Q,hostconf:X,apppath:K,history:Z,login:tt}}),it=new o.default({el:"#app",router:j,store:st,components:{App:r},template:"<App/>"});window.app=it},NpJN:function(t,e){},Ru3I:function(t,e){},aUYB:function(t,e){},hF2V:function(t,e){},pgzb:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e36cf87b871295a9c5c4.js.map